/*! For license information please see LPSAML.bundle.js.LICENSE.txt */
!function(){"use strict";var e={d:function(t,n){for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t={};function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,o(i.key),i)}}function o(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}e.d(t,{default:function(){return L}});var r=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.instance?e.instance:(e.instance=this,this._dismissAllLock=!1,this._dom={},this._active={},this._queue={},this._default={},this._position="",this._thickBorder="",this._duration=0,this._transition=0,this._maxActive=0,this.version="1.1.0",this._init(t),this)}return t=e,(n=[{key:"destroy",value:function(){var t=this;document.body.removeChild(this._dom),Object.keys(this).forEach((function(e){delete t[e]})),e.instance=null}},{key:"_init",value:function(e){void 0===e&&(e={}),this._dom=document.createElement("DIV"),this._dom.classList.add("notification-container"),this._default={handler:{position:"top-right",thickBorder:"top",duration:5e3,transition:200,maxActive:10},notification:{type:"info",message:"",title:"",iconless:!1,closable:!0,sticky:!1,renderTo:this._dom,CBtitle:"",callback:null,isDimmed:!1},color:{success:"rgb(76, 175, 80)",info:"rgb(3, 169, 244)",warning:"rgb(255, 152, 0)",error:"rgb(244, 67, 54)"},svgPath:{success:"M12.5 0C5.602 0 0 5.602 0 12.5S5.602 25 12.5 25 25 19.398 25 12.5 19.398 0 12.5 0zm-2.3 18.898l-5.5-5.5 1.8-1.796 3.7 3.699L18.5 7l1.8 1.8zm0 0",info:"M12.504.035a12.468 12.468 0 100 24.937 12.468 12.468 0 000-24.937zM15.1 19.359c-.643.25-1.153.445-1.537.576-.384.134-.825.199-1.333.199-.775 0-1.381-.192-1.813-.57a1.832 1.832 0 01-.642-1.442c0-.227.015-.459.047-.693.03-.24.083-.504.154-.806l.802-2.835c.069-.272.132-.527.182-.77.048-.244.069-.467.069-.668 0-.36-.075-.615-.223-.756-.153-.144-.437-.213-.857-.213-.207 0-.422.036-.639.095a9.914 9.914 0 00-.56.184l.213-.874a19.777 19.777 0 011.51-.549 4.48 4.48 0 011.361-.23c.77 0 1.368.19 1.784.56a1.857 1.857 0 01.626 1.452c0 .122-.012.341-.04.652a4.44 4.44 0 01-.162.856l-.798 2.831a8.133 8.133 0 00-.176.775c-.05.288-.075.51-.075.66 0 .374.082.633.251.771.165.134.458.202.875.202.192 0 .412-.037.66-.1.243-.073.42-.127.531-.18zm-.144-11.483a1.901 1.901 0 01-1.343.518 1.93 1.93 0 01-1.352-.518 1.65 1.65 0 01-.562-1.258 1.688 1.688 0 01.562-1.266 1.914 1.914 0 011.35-.522c.524 0 .975.173 1.345.523a1.673 1.673 0 01.56 1.266 1.65 1.65 0 01-.56 1.257z",warning:"M24.585 21.17L13.774 3.24a1.51 1.51 0 00-2.586 0L.376 21.17a1.51 1.51 0 001.293 2.29h21.623a1.51 1.51 0 001.292-2.29zM12.49 8.714c.621 0 1.146.35 1.146.97 0 1.895-.223 4.618-.223 6.513 0 .494-.541.7-.923.7-.51 0-.94-.208-.94-.701 0-1.894-.223-4.617-.223-6.511 0-.62.51-.971 1.163-.971zm.015 11.734a1.225 1.225 0 01-1.225-1.226c0-.669.525-1.227 1.225-1.227.652 0 1.21.558 1.21 1.227 0 .652-.557 1.225-1.21 1.225z",error:"M12.469.027c-3.332 0-6.465 1.301-8.824 3.653-4.86 4.86-4.86 12.777 0 17.636a12.392 12.392 0 008.824 3.653c3.336 0 6.465-1.301 8.824-3.653 4.863-4.859 4.863-12.777 0-17.636A12.417 12.417 0 0012.469.027zm5.61 18.086a1.137 1.137 0 01-.802.332c-.285 0-.582-.113-.8-.332l-4.008-4.008-4.008 4.008a1.137 1.137 0 01-.8.332c-.286 0-.583-.113-.802-.332a1.132 1.132 0 010-1.605l4.008-4.004L6.86 8.496a1.132 1.132 0 010-1.605 1.127 1.127 0 011.602 0l4.008 4.007 4.008-4.007a1.127 1.127 0 011.601 0c.45.449.45 1.164 0 1.605l-4.004 4.008 4.004 4.004c.45.449.45 1.164 0 1.605zm0 0"}},this._setOptionsDefault(e),this._position=e.position,this._thickBorder=e.thickBorder,this._duration=e.duration,this._transition=e.transition,this._maxActive=e.maxActive,this._setAttributesDefault(),this._dom.classList.add(this._position),this._attach()}},{key:"_setOptionsDefault",value:function(e){void 0===e.position&&(e.position=this._default.handler.position),void 0===e.thickBorder&&(e.thickBorder=this._default.handler.thickBorder),void 0===e.duration&&(e.duration=this._default.handler.duration),void 0===e.transition&&(e.transition=this._default.handler.transition),void 0===e.maxActive&&(e.maxActive=this._default.handler.maxActive)}},{key:"_setAttributesDefault",value:function(){"top-left"!==this._position&&"top-right"!==this._position&&"bottom-left"!==this._position&&"bottom-right"!==this._position&&(this._position=this._default.handler.position),"top"!==this._thickBorder&&"bottom"!==this._thickBorder&&"left"!==this._thickBorder&&"right"!==this._thickBorder&&"none"!==this._thickBorder&&(this._thickBorder=this._default.handler.thickBorder),("number"!=typeof this._duration||this._duration<=0)&&(this._duration=this._default.handler.duration),("number"!=typeof this._transition||this._duration<2*this._transition||this._transition<=0)&&(this._transition=this._default.handler.transition),("number"!=typeof this._maxActive||this._maxActive<=0)&&(this._maxActive=this._default.handler.maxActive)}},{key:"_attach",value:function(){var e=document.createDocumentFragment();e.appendChild(this._dom),document.body.appendChild(e)}},{key:"_events",value:function(e){var t=this,n=!1,i=function(){e.isDimmed&&t._unDim(e)},o=function(){void 0!==t._active[e.id]&&(e.requestCount>1?t._decrementRequestCounter(e,!0):n||(n=!0,window.clearTimeout(e.timeoutID),e.dom.close.removeEventListener("click",o),t._close(e)))};e.sticky&&(e.dom.addEventListener("mouseenter",i.bind(this)),e.dom.addEventListener("mouseout",i.bind(this))),e.closable&&(e.dom.addEventListener("click",o.bind(this)),e.dom.close.addEventListener("click",o.bind(this))),e.dom.addEventListener("mouseover",function(){void 0!==t._active[e.id]&&(n||e.isDimmed||t._resetTimeout(e))}.bind(this))}},{key:"_buildUI",value:function(e){var t=this;if(e.requestCount=1,e.totalRequestCount=1,this._buildUIDom(e),this._buildNotificationType(e),e.iconless&&e.dom.message.classList.add("iconless-width"),e.dom.text.appendChild(e.dom.maintitle),e.dom.text.appendChild(e.dom.message),e.callback){var n=document.createElement("BUTTON");n.innerHTML=e.CBtitle,e.dom.text.appendChild(n),n.addEventListener("click",(function(){t._close(e),e.callback()}))}return e.iconless||e.dom.appendChild(e.dom.icon),e.dom.appendChild(e.dom.text),e.closable&&e.dom.appendChild(e.dom.close),e}},{key:"_buildUIDom",value:function(e){e.dom=document.createElement("DIV"),e.dom.icon=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.dom.iconPath=document.createElementNS("http://www.w3.org/2000/svg","path"),e.dom.text=document.createElement("DIV"),e.dom.close=document.createElement("DIV"),e.dom.maintitle=document.createElement("H6"),e.dom.message=document.createElement("P"),e.dom.classList.add("notification"),e.dom.icon.classList.add("vector-container"),e.dom.text.classList.add("text-container"),e.dom.close.classList.add("close"),"top"===e.thickBorder?e.dom.classList.add("top-border"):"bottom"===e.thickBorder?e.dom.classList.add("bottom-border"):"left"===e.thickBorder?e.dom.classList.add("left-border"):"right"===e.thickBorder&&e.dom.classList.add("right-border"),e.dom.maintitle.innerHTML=e.title||"",e.dom.message.innerHTML=e.message||"",e.dom.close.innerHTML="&#x2716;",e.dom.icon.setAttribute("viewBox","0 0 25 25"),e.dom.icon.setAttribute("width","25"),e.dom.icon.setAttribute("height","25"),e.dom.icon.appendChild(e.dom.iconPath)}},{key:"_buildNotificationType",value:function(e){-1!==["success","warning","error","info"].indexOf(e.type)?(e.dom.classList.add(e.type),e.iconless||(e.dom.iconPath.setAttribute("fill",this._default.color[e.type]),e.dom.iconPath.setAttribute("d",this._default.svgPath[e.type]))):(e.dom.classList.add("info"),e.iconless||(e.dom.iconPath.setAttribute("fill",this._default.color.info),e.dom.iconPath.setAttribute("d",this._default.svgPath.info)))}},{key:"_start",value:function(e){var t=this;Object.keys(this._active).length>=this._maxActive?this._queue[e.id]=e:(this._active[e.id]=e,this._events(e),this._open(e),e.timeoutID=window.setTimeout((function(){t._checkCounter(e)}),e.duration))}},{key:"_open",value:function(e){"bottom-right"===this._position||"bottom-left"===this._position?e.renderTo.insertBefore(e.dom,e.renderTo.firstChild):e.renderTo.appendChild(e.dom),e.opened=Date.now(),window.setTimeout((function(){e.dom.style.opacity=1}),10)}},{key:"_close",value:function(e){var t=this;e.isClosing||(e.isClosing=!0,e.closed=Date.now(),e.effectiveDuration=e.closed-e.opened,e.dom.style.opacity=0,window.setTimeout((function(){e.renderTo.removeChild(e.dom),delete t._active[e.id],Object.keys(t._queue).length>0?(t._start(t._queue[Object.keys(t._queue)[0]]),delete t._queue[Object.keys(t._queue)[0]]):0===Object.keys(t._active).length&&(t._dismissAllLock=!1)}),1e3))}},{key:"_incrementRequestCounter",value:function(e){if(++e.requestCount,e.totalRequestCount<e.requestCount&&(e.totalRequestCount=e.requestCount),e.requestCount>1){var t="∞";e.requestCount<100&&(t=e.requestCount),e.dom.counter?e.dom.counter.innerHTML=t:(e.dom.counter=document.createElement("DIV"),e.dom.counter.classList.add("counter"),e.dom.counter.innerHTML=t,e.dom.appendChild(e.dom.counter))}e.sticky&&e.isDimmed&&this._unDim(e)}},{key:"_decrementRequestCounter",value:function(e,t){if(!e.sticky||t)if(this._resetTimeout(e),--e.requestCount,e.requestCount>1){var n="∞";e.requestCount<100&&(n=e.requestCount),e.dom.counter.innerHTML=n}else e.dom.removeChild(e.dom.counter),delete e.dom.counter;else e.isDimmed||this._dim(e)}},{key:"_checkCounter",value:function(e){e.requestCount>1?this._decrementRequestCounter(e):e.renderTo.contains(e.dom)&&(window.clearTimeout(e.timeoutID),e.sticky?this._dim(e):this._close(e))}},{key:"_clearRequestCount",value:function(e){e.requestCount=1,e.dom.removeChild(e.dom.counter),delete e.dom.counter}},{key:"_resetTimeout",value:function(e){var t=this;window.clearTimeout(e.timeoutID),e.timeoutID=window.setTimeout((function(){t._checkCounter(e)}),e.duration)}},{key:"_dim",value:function(e){var t=this,n=100;!function i(){if(n>=0&&(e.dom.style.opacity=n/100,50==--n&&e.sticky))return e.dom.style.opacity=.5,void(e.isDimmed=!0);window.setTimeout(i,t._transition/100)}()}},{key:"_unDim",value:function(e){var t=this,n=50;!function i(){if(n<100)e.dom.style.opacity=n/100,++n;else if(100===n)return e.dom.style.opacity=1,e.isDimmed=!1,void t._resetTimeout(e);window.setTimeout(i,t._transition/100)}()}},{key:"_checkNotificationOptionsValidity",value:function(e){return!(void 0===e||void 0===e.type||void 0===e.message||"string"!=typeof e.message||0===e.message.length||e.sticky&&!1===e.closable||("info"!==e.type&&"success"!==e.type&&"warning"!==e.type&&"error"!==e.type&&(e.type=this._default.notification.type),this._dismissAllLock&&(this._dismissAllLock=!1),0))}},{key:"_setOptionsFallback",value:function(e){void 0===e.title&&(e.title=this._default.notification.title),void 0===e.duration&&(e.duration=this._duration),void 0===e.iconless&&(e.iconless=this._default.notification.iconless),void 0===e.thickBorder&&(e.thickBorder=this._thickBorder),void 0===e.closable&&(e.closable=this._default.notification.closable),void 0===e.sticky&&(e.sticky=this._default.notification.sticky),void 0===e.renderTo&&(e.renderTo=this._default.notification.renderTo),void 0===e.CBtitle&&(e.CBtitle=this._default.notification.CBtitle),void 0===e.callback&&(e.callback=this._default.notification.callback),void 0===e.isDimmed&&(e.isDimmed=this._default.notification.isDimmed)}},{key:"_idGenerator",value:function(e,t){var n=0;if(!(0===e.length||t>12)){for(var i=0;i<e.length;++i)n=(n<<5)-n+e.charCodeAt(i),n|=0;return(Math.abs(n).toString(36)+""+Math.abs(n/2).toString(36).split("").reverse().join("")).substring(0,t).toUpperCase()}}},{key:"new",value:function(e){if(!1===this._checkNotificationOptionsValidity(e))return console.error("Notification.js : new() options argument object is invalid."),-1;this._setOptionsFallback(e);var t=this._buildUI({id:this._idGenerator("".concat(e.type).concat(e.message),5),type:e.type,message:e.message,title:e.title,duration:e.duration,iconless:e.iconless,thickBorder:e.thickBorder,closable:e.closable,sticky:e.sticky,renderTo:e.renderTo,CBtitle:e.CBtitle,callback:e.callback,isDimmed:e.isDimmed});return this._active[t.id]?(this._resetTimeout(this._active[t.id]),this._incrementRequestCounter(this._active[t.id]),t=this._active[t.id]):this._start(t),t.id}},{key:"info",value:function(e){if(e)return e.type="info",this.new(e);console.error("Notification.js : No arguments provided for info() method.")}},{key:"success",value:function(e){if(e)return e.type="success",this.new(e);console.error("Notification.js : No arguments provided for success() method.")}},{key:"warning",value:function(e){if(e)return e.type="warning",this.new(e);console.error("Notification.js : No arguments provided for warning() method.")}},{key:"error",value:function(e){if(e)return e.type="error",this.new(e);console.error("Notification.js : No arguments provided for error() method.")}},{key:"dismiss",value:function(e){window.clearTimeout(this._active[e].timeoutID),this._active[e].requestCount>1&&this._clearRequestCount(this._active[e]),this._close(this._active[e])}},{key:"dismissAll",value:function(){if(!this._dismissAllLock&&0!==Object.keys(this._active).length)for(var e in this._dismissAllLock=!0,this._queue={},this._active)this.dismiss(e)}},{key:"dismissType",value:function(e){if(0!==Object.keys(this._active).length)for(var t in this._active)this._active[t].type===e&&this.dismiss(t)}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,l(i.key),i)}}function l(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}window.notification=new r;var c=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._version="0.1.1",this._asideScroll=null,this._dndController=null,this._db=null},t=[{key:"_initApp",value:function(){}},{key:"_events",value:function(){document.querySelector("#aside-toggle").addEventListener("click",this._toggleAside.bind(this)),document.querySelector("#db-add").addEventListener("click",this._requestNewElement.bind(this)),document.querySelector("#db-save").addEventListener("click",this._exportDatabase.bind(this)),document.querySelector("#db-erase").addEventListener("click",this._clearDatabaseModal.bind(this)),document.querySelector("#info-button").addEventListener("click",this._infoModal.bind(this)),document.querySelector("#modal-overlay").addEventListener("click",this._closeModal.bind(this))}},{key:"_finalizeInit",value:function(){return new Promise((function(e,t){try{document.querySelector("#loading-overlay").style.opacity=0,setTimeout((function(){document.querySelector("#loading-overlay").style.display="none",e()}),500)}catch(e){t(e)}}))}},{key:"_toggleAside",value:function(){document.getElementById("bd-viewer").classList.contains("opened")?(document.getElementById("aside-toggle").innerHTML="&rsaquo;",document.getElementById("bd-viewer").classList.remove("opened")):(document.getElementById("aside-toggle").innerHTML="&lsaquo;",document.getElementById("bd-viewer").classList.add("opened"))}},{key:"_fillDatabase",value:function(){}},{key:"_requestNewElement",value:function(){}},{key:"_exportDatabase",value:function(){}},{key:"_clearDatabase",value:function(){}},{key:"_clearDatabaseModal",value:function(){var e=this;if(null!==this._db){var t=document.getElementById("modal-overlay");fetch("assets/html/cleardatabasemodal.html").then((function(n){t.style.display="flex",n.text().then((function(n){var i=document.createRange().createContextualFragment(n);t.appendChild(i),t.querySelector("#save-button").addEventListener("click",(function(){e._exportDatabase(),e._closeModal({srcElement:{id:"close-button"}})})),t.querySelector("#confirm-button").addEventListener("click",(function(){e._clearDatabase(),e._closeModal({srcElement:{id:"close-button"}})})),setTimeout((function(){return t.style.opacity=1}),50)}))})).catch((function(e){return console.error(e)}))}else this._clearDatabase()}},{key:"_infoModal",value:function(){var e=this,t=document.getElementById("modal-overlay");fetch("assets/html/infomodal.html").then((function(n){t.style.display="flex",n.text().then((function(n){var i=document.createRange().createContextualFragment(n);t.appendChild(i),t.querySelector("#app-version").innerHTML=e._version,setTimeout((function(){return t.style.opacity=1}),50)}))})).catch((function(e){return console.error(e)}))}},{key:"_closeModal",value:function(e){if("modal-overlay"===e.srcElement.id||"close-modal"===e.srcElement.className||"close-button"===e.srcElement.id){var t=document.getElementById("modal-overlay");"flex"===t.style.display&&(t.style.opacity=0,setTimeout((function(){t.innerHTML="",t.style=""}),400))}}}],t&&s(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,m(i.key),i)}}function m(e){var t=function(e){if("object"!=d(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}var h=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);try{this._container=document.querySelector(t.target),this._onDropFileCB=t.onDropFile,this._borderStyle=this._container.style.border,this._events()}catch(e){console.error("Unable to build the DnD class.\n".concat(e))}},n=[{key:"formatAsJSON",value:function(e){return JSON.parse(e)}},{key:"formatCSVAsJSON",value:function(e,t){for(var n=[],i=0,o=0,r=0;r<e.length;++r){var a=e[r],s=e[r+1];n[i]=n[i]||[],n[i][o]=n[i][o]||"",a!==t?"\r"!==a||"\n"!==s?"\n"!==a&&"\r"!==a?n[i][o]+=a:(++i,o=0):(n[i][o]=parseFloat(n[i][o]),++i,o=0,++r):(n[i][o]=parseFloat(n[i][o]),++o)}return n}}],(t=[{key:"_events",value:function(){this._container.addEventListener("dragenter",this._dragEnter.bind(this),!1),this._container.addEventListener("dragover",this._dragOver.bind(this),!1),this._container.addEventListener("dragleave",this._dragLeave.bind(this),!1),this._container.addEventListener("drop",this._drop.bind(this),!1)}},{key:"_eventBehavior",value:function(e){e.stopPropagation(),e.preventDefault()}},{key:"_dragEnter",value:function(e){this._eventBehavior(e),this._container.style.border="dashed 6px rgb(255, 100, 100)"}},{key:"_dragOver",value:function(e){this._eventBehavior(e),e.dataTransfer.dropEffect="copy"}},{key:"_dragLeave",value:function(e){null===e.relatedTarget&&(this._eventBehavior(e),this._container.style.border=this._borderStyle)}},{key:"_drop",value:function(e){var t=this;this._eventBehavior(e),this._container.style.border=this._borderStyle;for(var n=e.dataTransfer.files,i=0;i<n.length;++i){var o=new FileReader;o.onload=function(e){return function(n){t._onDropFileCB(e,n)}}(n[i]),o.readAsText(n[i])}}}])&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_(i.key),i)}}function _(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}var v=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._target=t.target,this._horizontal=t.horizontal||!1,this._minSize=t.minSize||15,this._style=t.style||{},this._wrapper={},this._container={},this._bar={},this._scrollRatio=0,this._lastPageX=0,this._lastPageY=0,this._init().then(this._events.bind(this)).then(this._updateScrollBar.bind(this))},(t=[{key:"_init",value:function(){var e=this;return new Promise((function(t){var n=document.createDocumentFragment();for(e._target.classList.add("scrollbar-container"),e._wrapper=document.createElement("DIV"),e._wrapper.setAttribute("class","scrollbar-wrapper"),e._container=document.createElement("DIV"),!0===e._horizontal?e._container.setAttribute("class","horizontal-scrollbar-content"):e._container.setAttribute("class","scrollbar-content");e._target.firstChild;)e._container.appendChild(e._target.firstChild);e._wrapper.appendChild(e._container),n.appendChild(e._wrapper),e._target.appendChild(n),!0===e._horizontal?e._target.insertAdjacentHTML("beforeend",'<div class="horizontal-scroll"></div>'):e._target.insertAdjacentHTML("beforeend",'<div class="scroll"></div>'),e._bar=e._target.lastChild,e.style=e._style,t()}))}},{key:"_events",value:function(){var e=this;return new Promise((function(t){e._drag=e._drag.bind(e),e._stopDrag=e._stopDrag.bind(e),window.addEventListener("resize",e._updateScrollBar.bind(e)),e._container.addEventListener("scroll",e._updateScrollBar.bind(e)),e._container.addEventListener("mouseenter",e._updateScrollBar.bind(e)),e._bar.addEventListener("mousedown",e._barClicked.bind(e)),t()}))}},{key:"_barClicked",value:function(e){var t=this;!0===this._horizontal?this._lastPageX=e.pageX:this._lastPageY=e.pageY,this._bar.classList.add("scrollbar-grabbed"),document.body.classList.add("scrollbar-grabbed"),requestAnimationFrame((function(){document.addEventListener("mousemove",t._drag),document.addEventListener("mouseup",t._stopDrag)}))}},{key:"_drag",value:function(e){var t=this;if(!0===this._horizontal){var n=e.pageX-this._lastPageX;this._lastPageX=e.pageX,requestAnimationFrame((function(){t._container.scrollLeft+=n/t._scrollRatio}))}else{var i=e.pageY-this._lastPageY;this._lastPageY=e.pageY,requestAnimationFrame((function(){t._container.scrollTop+=i/t._scrollRatio}))}}},{key:"_stopDrag",value:function(){this._bar.classList.remove("scrollbar-grabbed"),document.body.classList.remove("scrollbar-grabbed"),document.removeEventListener("mousemove",this._drag),document.removeEventListener("mouseup",this._stopDrag)}},{key:"_updateScrollBar",value:function(){!0===this._horizontal?this._updateHorizontalScroll():this._updateVerticalScroll()}},{key:"_updateHorizontalScroll",value:function(){var e=this,t=this._container.scrollWidth,n=this._container.clientWidth,i=-1*(this._target.clientHeight-this._bar.clientHeight);this._scrollRatio=n/t,requestAnimationFrame((function(){if(e._scrollRatio>=1)e._bar.classList.add("hidden");else{var o=Math.max(100*e._scrollRatio,e._minSize)*n/100,r=e._container.scrollLeft/t*100*n/100;if(Math.max(100*e._scrollRatio,e._minSize)===e._minSize){o=e._minSize<n?e._minSize:n/2;var a=100*e._container.scrollLeft/(t-n);r=(n-o)*((e._container.scrollLeft+a*n/100)/t*100)/100}e._bar.classList.remove("hidden"),e._bar.style.cssText="width: ".concat(o,"px; left: ").concat(r,"px; bottom: ").concat(i,"px;")}}))}},{key:"_updateVerticalScroll",value:function(){var e=this,t=this._container.scrollHeight,n=this._container.clientHeight,i=-1*(this._target.clientWidth-this._bar.clientWidth);this._scrollRatio=n/t,requestAnimationFrame((function(){if(e._scrollRatio>=1)e._bar.classList.add("hidden");else{var o=Math.max(100*e._scrollRatio,e._minSize)*n/100,r=e._container.scrollTop/t*100*n/100;if(Math.max(100*e._scrollRatio,e._minSize)===e._minSize){o=e._minSize<n?e._minSize:n/2;var a=100*e._container.scrollTop/(t-n);r=(n-o)*((e._container.scrollTop+a*n/100)/t*100)/100}e._bar.classList.remove("hidden"),e._bar.style.cssText="height: ".concat(o,"px; top: ").concat(r,"px; right: ").concat(i,"px;")}}))}},{key:"updateScrollbar",value:function(){this._updateScrollBar()}},{key:"style",set:function(e){this._style=e,this._style.color&&this._target.style.setProperty("--scroll-color",this._style.color),this._style.size&&this._target.style.setProperty("--scroll-size",this._style.size),this._style.radius&&this._target.style.setProperty("--scroll-radius",this._style.radius),this._style.lowOpacity&&this._target.style.setProperty("--scroll-low-opacity",this._style.lowOpacity),this._style.highOpacity&&this._target.style.setProperty("--scroll-high-opacity",this._style.highOpacity),this._style.transitionDuration&&this._target.style.setProperty("--scroll-transition-duration",this._style.transitionDuration)}}])&&p(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,g(i.key),i)}}function g(e){var t=function(e){if("object"!=y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(k=function(){return!!e})()}function w(){return w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},w.apply(null,arguments)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}var L=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t,n){return t=S(t),function(e,t){if(t&&("object"==y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,k()?Reflect.construct(t,n||[],S(e).constructor):t.apply(e,n))}(this,t))._perf={db:{parsing:{m1:null,m2:null},loading:{m1:null,m2:null}}},e._initApp().then(e._events.bind(e)).then(e._finalizeInit.bind(e)).catch((function(t){window.notification.error({message:"Erreur fatale à l'initialisation de l'application. Contactez le support"}),document.getElementById("feedback-label").innerHTML="Une ereur fatale est survenue à l'initialisation de l'application, aucune fonctionnalité n'est accessible. Contactez le support.",console.error("LPSA v".concat(e._version," : Erreur fatale à l'initialisation de l'application. Contactez le support en précisant l'erreur suivante :\n"),t)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(t,e),n=t,i=[{key:"_initApp",value:function(){var e=this;return new Promise((function(t,n){try{e._dndController=new h({target:".dnd-container",onDropFile:function(t,n){if("application/vnd.ms-excel"===t.type){e._perf.db.parsing.m1=performance.now();var i=h.formatCSVAsJSON(n.target.result,";");e._perf.db.parsing.m2=performance.now(),console.log("Base de donnée parcourue en ".concat(((e._perf.db.parsing.m2-e._perf.db.parsing.m1)/1e3).toFixed(3)," seconde(s).")),document.getElementById("feedback-label").innerHTML="Base de donnée parcourue en ".concat(((e._perf.db.parsing.m2-e._perf.db.parsing.m1)/1e3).toFixed(3)," seconde(s)."),e._fillDatabase({version:1,date:(new Date).toISOString().split("T")[0],data:i})}else"application/json"===t.type?e._fillDatabase(h.formatAsJSON(n.target.result)):(window.notification.error({message:"Format de fichier non pris en charge pour l'import de la base de donnée"}),document.getElementById("feedback-label").innerHTML="Le fichier déposé n'est pas au format supporté (.CSV).")}});var i=window.localStorage.getItem("lpsaml-session-db");null!==i&&e._fillDatabase(JSON.parse(i)),t()}catch(e){n(e)}}))}},{key:"_events",value:function(){var e=this;return new Promise((function(n,i){try{document.querySelector("#filter-input").addEventListener("click",e._filterDatabase.bind(e)),(o=t,r=e,"function"==typeof(a=w(S(1&3?o.prototype:o),"_events",r))?function(e){return a.apply(r,e)}:a)([]),n()}catch(e){i(e)}var o,r,a}))}},{key:"_filterDatabase",value:function(e){if(null===this._db)return window.notification.warning({message:"Aucune base de donnée n'est chargée en mémoire"}),document.getElementById("feedback-label").innerHTML="Veuillez d'abord glisser-déposer n'importe ou sur la page le JSON de données.",void e.target.blur();for(var t=[],n=0;n<this._db.data.length;++n)0===this._db.data[n][6]?this._db.data[n][4]<this._db.data[n][3]&&this._db.data[n][4]<this._db.data[n][5]&&t.push(this._db.data[n]):1===this._db.data[n][6]?this._db.data[n][3]<this._db.data[n][4]&&this._db.data[n][3]<this._db.data[n][5]&&t.push(this._db.data[n]):2===this._db.data[n][6]&&this._db.data[n][5]<this._db.data[n][4]&&this._db.data[n][5]<this._db.data[n][3]&&t.push(this._db.data[n]);document.getElementById("feedback-label").innerHTML="Selon le critère de filtrage du plus faible pourcentage qui se réalise, ".concat(t.length," résultat(s) trouvés.")}},{key:"_fillDatabase",value:function(e){var t=this;if(!e.date||!e.data)return window.notification.error({message:"Le contenu de la base de donnée est mal formaté"}),void(document.getElementById("feedback-label").innerHTML="Le fichier déposé ne contiens pas les données attentudes.");this._perf.db.loading.m1=performance.now(),window.localStorage.removeItem("lpsaml-session-db"),document.getElementById("db-info").innerHTML="",document.getElementById("aside-content").innerHTML="";var n=new Intl.DateTimeFormat("fr",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e.date));document.getElementById("feedback-label").innerHTML="Import de la base de donnée du ".concat(n,"..."),document.getElementById("db-info").appendChild(this.__buildDatabaseInformation(e,n));for(var i=function(n){var i=document.createElement("P");i.innerHTML="<span>\n        ".concat(e.data[n][0]," | ").concat(e.data[n][1]," | ").concat(e.data[n][2],"<br>\n        ").concat(e.data[n][3],"% | ").concat(e.data[n][4],"% | ").concat(e.data[n][5],"%<br>\n        ").concat(e.data[n][6]," – ").concat(2===e.data[n][6]?"Victoire Extérieure":1===e.data[n][6]?"Victoire Domicile":"Match Nul","\n      </span>");var o=document.createElement("BUTTON");o.addEventListener("click",(function(){t._editElementModal(n)})),o.innerHTML="✏️",i.appendChild(o);var r=document.createElement("BUTTON");r.addEventListener("click",(function(){t._removeDatabaseElement(n)})),r.innerHTML="🗑️",i.appendChild(r),document.getElementById("aside-content").appendChild(i)},o=0;o<e.data.length;++o)i(o);this._db=e,window.localStorage.setItem("lpsaml-session-db",JSON.stringify(this._db)),this._asideScroll=new v({target:document.getElementById("aside-content"),minSize:200,style:{color:"#758C78"}}),requestAnimationFrame(this._asideScroll.updateScrollbar.bind(this._asideScroll)),this._perf.db.loading.m2=performance.now(),window.notification.success({message:"Base de donnée du ".concat(n," chargée"),CBtitle:"Voir les données",callback:function(){return t._toggleAside()}}),console.log("Base de donnée du ".concat(n," chargée en ").concat(((this._perf.db.loading.m2-this._perf.db.loading.m1)/1e3).toFixed(3)," seconde(s).")),document.getElementById("feedback-label").innerHTML="Base de donnée du ".concat(n," chargée en ").concat(((this._perf.db.loading.m2-this._perf.db.loading.m1)/1e3).toFixed(3)," seconde(s).")}},{key:"__buildDatabaseInformation",value:function(e,t){var n=document.createElement("P");return n.innerHTML="\n      ".concat(t," (version ").concat(e.version,")<br>\n      ").concat(e.data.length," entrée(s) en base\n    "),n}},{key:"_requestNewElement",value:function(){null===this._db&&(this._db={version:"1",date:"".concat((new Date).toISOString().split("T")[0]),data:JSON.parse("[]")}),this._addElementModal()}},{key:"_editDatabaseElement",value:function(e,t){this._db.data[e]=t,this._fillDatabase(this._db)}},{key:"_removeDatabaseElement",value:function(e){this._db.data.splice(e,1),this._fillDatabase(this._db)}},{key:"_exportDatabase",value:function(){if(null!==this._db){var e=document.createElement("A"),t=this._db;t.version="".concat(parseInt(this._db.version)+1),t.date=(new Date).toISOString().split("T")[0];var n=new Blob([JSON.stringify(t)],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="lpsaml-dataset-".concat(t.date,".json"),e.click()}else document.getElementById("feedback-label").innerHTML="Aucune base de donnée à exporter.",window.notification.warning({message:"Aucune base de donnée à exporter"})}},{key:"_clearDatabase",value:function(){if(this._db){var e=this._db.date;document.getElementById("feedback-label").innerHTML="Suppression de la base de donnée du ".concat(e,"..."),document.getElementById("db-info").innerHTML="<p>Aucune information disponible, veuillez charger une base de donnée.</p>",document.getElementById("aside-content").innerHTML="<i>Aucune donnée chargée en session. Veuillez glisser/déposer un fichier de base de donnée  brute (CSV) ou formattée (JSON) n'importe où sur cette page.</i>",window.localStorage.removeItem("lpsaml-session-db"),this._db=null,document.getElementById("feedback-label").innerHTML="Base de donnée supprimée.",window.notification.success({message:"Base de donnée du ".concat(e," supprimée")})}else document.getElementById("feedback-label").innerHTML="Aucune base de donnée à supprimer.",window.notification.warning({message:"Aucune base de donnée à supprimer"})}},{key:"_addElementModal",value:function(){var e=this,t=document.getElementById("modal-overlay");fetch("assets/html/newoddelementmodal.html").then((function(n){t.style.display="flex",n.text().then((function(n){var i=document.createRange().createContextualFragment(n);t.appendChild(i),t.querySelector("#submit-save").addEventListener("click",(function(){for(var n=[t.querySelector("#v1-1").value,t.querySelector("#v1-2").value,t.querySelector("#v1-3").value],i=[t.querySelector("#v2-1").value,t.querySelector("#v2-2").value,t.querySelector("#v2-3").value],o=t.querySelector("#match-result").value,r=!0,a=0;a<n.length;++a)if(!n[a]){r=!1;break}for(var s=0;s<i.length;++s)if(!i[s]){r=!1;break}o||(r=!1),r?(e._db.data.push([parseFloat(n[0].replace(",",".")),parseFloat(n[1].replace(",",".")),parseFloat(n[2].replace(",",".")),parseFloat(i[0].replace(",",".")),parseFloat(i[1].replace(",",".")),parseFloat(i[2].replace(",",".")),parseFloat(o.replace(",","."))]),e._fillDatabase(e._db),e._closeModal({srcElement:{id:"close-button"}})):window.notification.warning({message:"Veuillez remplir tout les champs"})})),setTimeout((function(){return t.style.opacity=1}),50)}))})).catch((function(e){return console.error(e)}))}},{key:"_editElementModal",value:function(e){var t=this,n=document.getElementById("modal-overlay");fetch("assets/html/newoddelementmodal.html").then((function(i){n.style.display="flex",i.text().then((function(i){var o=document.createRange().createContextualFragment(i);n.appendChild(o);var r=t._db.data[e];n.querySelector("#v1-1").value=r[0],n.querySelector("#v1-2").value=r[1],n.querySelector("#v1-3").value=r[2],n.querySelector("#v2-1").value=r[3],n.querySelector("#v2-2").value=r[4],n.querySelector("#v2-3").value=r[5],n.querySelector("#match-result").value=r[6],n.querySelector("#submit-save").addEventListener("click",(function(){for(var e=[n.querySelector("#v1-1").value,n.querySelector("#v1-2").value,n.querySelector("#v1-3").value],i=[n.querySelector("#v2-1").value,n.querySelector("#v2-2").value,n.querySelector("#v2-3").value],o=n.querySelector("#match-result").value,r=!0,a=0;a<e.length;++a)if(!e[a]){r=!1;break}for(var s=0;s<i.length;++s)if(!i[s]){r=!1;break}o||(r=!1),r?(t._db.data.push([parseFloat(e[0].replace(",",".")),parseFloat(e[1].replace(",",".")),parseFloat(e[2].replace(",",".")),parseFloat(i[0].replace(",",".")),parseFloat(i[1].replace(",",".")),parseFloat(i[2].replace(",",".")),parseFloat(o.replace(",","."))]),t._fillDatabase(t._db),t._closeModal({srcElement:{id:"close-button"}})):window.notification.warning({message:"Veuillez remplir tout les champs"})})),setTimeout((function(){return n.style.opacity=1}),50)}))})).catch((function(e){return console.error(e)}))}}],i&&b(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i}(c);window.LPSAML=t.default}();