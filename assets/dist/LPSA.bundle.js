/*! For license information please see LPSA.bundle.js.LICENSE.txt */
!function(){"use strict";var e={d:function(t,n){for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t={};function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,o(i.key),i)}}function o(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}e.d(t,{default:function(){return q}});var r=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.instance?e.instance:(e.instance=this,this._dismissAllLock=!1,this._dom={},this._active={},this._queue={},this._default={},this._position="",this._thickBorder="",this._duration=0,this._transition=0,this._maxActive=0,this.version="1.1.0",this._init(t),this)}return t=e,(n=[{key:"destroy",value:function(){var t=this;document.body.removeChild(this._dom),Object.keys(this).forEach((function(e){delete t[e]})),e.instance=null}},{key:"_init",value:function(e){void 0===e&&(e={}),this._dom=document.createElement("DIV"),this._dom.classList.add("notification-container"),this._default={handler:{position:"top-right",thickBorder:"top",duration:5e3,transition:200,maxActive:10},notification:{type:"info",message:"",title:"",iconless:!1,closable:!0,sticky:!1,renderTo:this._dom,CBtitle:"",callback:null,isDimmed:!1},color:{success:"rgb(76, 175, 80)",info:"rgb(3, 169, 244)",warning:"rgb(255, 152, 0)",error:"rgb(244, 67, 54)"},svgPath:{success:"M12.5 0C5.602 0 0 5.602 0 12.5S5.602 25 12.5 25 25 19.398 25 12.5 19.398 0 12.5 0zm-2.3 18.898l-5.5-5.5 1.8-1.796 3.7 3.699L18.5 7l1.8 1.8zm0 0",info:"M12.504.035a12.468 12.468 0 100 24.937 12.468 12.468 0 000-24.937zM15.1 19.359c-.643.25-1.153.445-1.537.576-.384.134-.825.199-1.333.199-.775 0-1.381-.192-1.813-.57a1.832 1.832 0 01-.642-1.442c0-.227.015-.459.047-.693.03-.24.083-.504.154-.806l.802-2.835c.069-.272.132-.527.182-.77.048-.244.069-.467.069-.668 0-.36-.075-.615-.223-.756-.153-.144-.437-.213-.857-.213-.207 0-.422.036-.639.095a9.914 9.914 0 00-.56.184l.213-.874a19.777 19.777 0 011.51-.549 4.48 4.48 0 011.361-.23c.77 0 1.368.19 1.784.56a1.857 1.857 0 01.626 1.452c0 .122-.012.341-.04.652a4.44 4.44 0 01-.162.856l-.798 2.831a8.133 8.133 0 00-.176.775c-.05.288-.075.51-.075.66 0 .374.082.633.251.771.165.134.458.202.875.202.192 0 .412-.037.66-.1.243-.073.42-.127.531-.18zm-.144-11.483a1.901 1.901 0 01-1.343.518 1.93 1.93 0 01-1.352-.518 1.65 1.65 0 01-.562-1.258 1.688 1.688 0 01.562-1.266 1.914 1.914 0 011.35-.522c.524 0 .975.173 1.345.523a1.673 1.673 0 01.56 1.266 1.65 1.65 0 01-.56 1.257z",warning:"M24.585 21.17L13.774 3.24a1.51 1.51 0 00-2.586 0L.376 21.17a1.51 1.51 0 001.293 2.29h21.623a1.51 1.51 0 001.292-2.29zM12.49 8.714c.621 0 1.146.35 1.146.97 0 1.895-.223 4.618-.223 6.513 0 .494-.541.7-.923.7-.51 0-.94-.208-.94-.701 0-1.894-.223-4.617-.223-6.511 0-.62.51-.971 1.163-.971zm.015 11.734a1.225 1.225 0 01-1.225-1.226c0-.669.525-1.227 1.225-1.227.652 0 1.21.558 1.21 1.227 0 .652-.557 1.225-1.21 1.225z",error:"M12.469.027c-3.332 0-6.465 1.301-8.824 3.653-4.86 4.86-4.86 12.777 0 17.636a12.392 12.392 0 008.824 3.653c3.336 0 6.465-1.301 8.824-3.653 4.863-4.859 4.863-12.777 0-17.636A12.417 12.417 0 0012.469.027zm5.61 18.086a1.137 1.137 0 01-.802.332c-.285 0-.582-.113-.8-.332l-4.008-4.008-4.008 4.008a1.137 1.137 0 01-.8.332c-.286 0-.583-.113-.802-.332a1.132 1.132 0 010-1.605l4.008-4.004L6.86 8.496a1.132 1.132 0 010-1.605 1.127 1.127 0 011.602 0l4.008 4.007 4.008-4.007a1.127 1.127 0 011.601 0c.45.449.45 1.164 0 1.605l-4.004 4.008 4.004 4.004c.45.449.45 1.164 0 1.605zm0 0"}},this._setOptionsDefault(e),this._position=e.position,this._thickBorder=e.thickBorder,this._duration=e.duration,this._transition=e.transition,this._maxActive=e.maxActive,this._setAttributesDefault(),this._dom.classList.add(this._position),this._attach()}},{key:"_setOptionsDefault",value:function(e){void 0===e.position&&(e.position=this._default.handler.position),void 0===e.thickBorder&&(e.thickBorder=this._default.handler.thickBorder),void 0===e.duration&&(e.duration=this._default.handler.duration),void 0===e.transition&&(e.transition=this._default.handler.transition),void 0===e.maxActive&&(e.maxActive=this._default.handler.maxActive)}},{key:"_setAttributesDefault",value:function(){"top-left"!==this._position&&"top-right"!==this._position&&"bottom-left"!==this._position&&"bottom-right"!==this._position&&(this._position=this._default.handler.position),"top"!==this._thickBorder&&"bottom"!==this._thickBorder&&"left"!==this._thickBorder&&"right"!==this._thickBorder&&"none"!==this._thickBorder&&(this._thickBorder=this._default.handler.thickBorder),("number"!=typeof this._duration||this._duration<=0)&&(this._duration=this._default.handler.duration),("number"!=typeof this._transition||this._duration<2*this._transition||this._transition<=0)&&(this._transition=this._default.handler.transition),("number"!=typeof this._maxActive||this._maxActive<=0)&&(this._maxActive=this._default.handler.maxActive)}},{key:"_attach",value:function(){var e=document.createDocumentFragment();e.appendChild(this._dom),document.body.appendChild(e)}},{key:"_events",value:function(e){var t=this,n=!1,i=function(){e.isDimmed&&t._unDim(e)},o=function(){void 0!==t._active[e.id]&&(e.requestCount>1?t._decrementRequestCounter(e,!0):n||(n=!0,window.clearTimeout(e.timeoutID),e.dom.close.removeEventListener("click",o),t._close(e)))};e.sticky&&(e.dom.addEventListener("mouseenter",i.bind(this)),e.dom.addEventListener("mouseout",i.bind(this))),e.closable&&(e.dom.addEventListener("click",o.bind(this)),e.dom.close.addEventListener("click",o.bind(this))),e.dom.addEventListener("mouseover",function(){void 0!==t._active[e.id]&&(n||e.isDimmed||t._resetTimeout(e))}.bind(this))}},{key:"_buildUI",value:function(e){var t=this;if(e.requestCount=1,e.totalRequestCount=1,this._buildUIDom(e),this._buildNotificationType(e),e.iconless&&e.dom.message.classList.add("iconless-width"),e.dom.text.appendChild(e.dom.maintitle),e.dom.text.appendChild(e.dom.message),e.callback){var n=document.createElement("BUTTON");n.innerHTML=e.CBtitle,e.dom.text.appendChild(n),n.addEventListener("click",(function(){t._close(e),e.callback()}))}return e.iconless||e.dom.appendChild(e.dom.icon),e.dom.appendChild(e.dom.text),e.closable&&e.dom.appendChild(e.dom.close),e}},{key:"_buildUIDom",value:function(e){e.dom=document.createElement("DIV"),e.dom.icon=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.dom.iconPath=document.createElementNS("http://www.w3.org/2000/svg","path"),e.dom.text=document.createElement("DIV"),e.dom.close=document.createElement("DIV"),e.dom.maintitle=document.createElement("H6"),e.dom.message=document.createElement("P"),e.dom.classList.add("notification"),e.dom.icon.classList.add("vector-container"),e.dom.text.classList.add("text-container"),e.dom.close.classList.add("close"),"top"===e.thickBorder?e.dom.classList.add("top-border"):"bottom"===e.thickBorder?e.dom.classList.add("bottom-border"):"left"===e.thickBorder?e.dom.classList.add("left-border"):"right"===e.thickBorder&&e.dom.classList.add("right-border"),e.dom.maintitle.innerHTML=e.title||"",e.dom.message.innerHTML=e.message||"",e.dom.close.innerHTML="&#x2716;",e.dom.icon.setAttribute("viewBox","0 0 25 25"),e.dom.icon.setAttribute("width","25"),e.dom.icon.setAttribute("height","25"),e.dom.icon.appendChild(e.dom.iconPath)}},{key:"_buildNotificationType",value:function(e){-1!==["success","warning","error","info"].indexOf(e.type)?(e.dom.classList.add(e.type),e.iconless||(e.dom.iconPath.setAttribute("fill",this._default.color[e.type]),e.dom.iconPath.setAttribute("d",this._default.svgPath[e.type]))):(e.dom.classList.add("info"),e.iconless||(e.dom.iconPath.setAttribute("fill",this._default.color.info),e.dom.iconPath.setAttribute("d",this._default.svgPath.info)))}},{key:"_start",value:function(e){var t=this;Object.keys(this._active).length>=this._maxActive?this._queue[e.id]=e:(this._active[e.id]=e,this._events(e),this._open(e),e.timeoutID=window.setTimeout((function(){t._checkCounter(e)}),e.duration))}},{key:"_open",value:function(e){"bottom-right"===this._position||"bottom-left"===this._position?e.renderTo.insertBefore(e.dom,e.renderTo.firstChild):e.renderTo.appendChild(e.dom),e.opened=Date.now(),window.setTimeout((function(){e.dom.style.opacity=1}),10)}},{key:"_close",value:function(e){var t=this;e.isClosing||(e.isClosing=!0,e.closed=Date.now(),e.effectiveDuration=e.closed-e.opened,e.dom.style.opacity=0,window.setTimeout((function(){e.renderTo.removeChild(e.dom),delete t._active[e.id],Object.keys(t._queue).length>0?(t._start(t._queue[Object.keys(t._queue)[0]]),delete t._queue[Object.keys(t._queue)[0]]):0===Object.keys(t._active).length&&(t._dismissAllLock=!1)}),1e3))}},{key:"_incrementRequestCounter",value:function(e){if(++e.requestCount,e.totalRequestCount<e.requestCount&&(e.totalRequestCount=e.requestCount),e.requestCount>1){var t="∞";e.requestCount<100&&(t=e.requestCount),e.dom.counter?e.dom.counter.innerHTML=t:(e.dom.counter=document.createElement("DIV"),e.dom.counter.classList.add("counter"),e.dom.counter.innerHTML=t,e.dom.appendChild(e.dom.counter))}e.sticky&&e.isDimmed&&this._unDim(e)}},{key:"_decrementRequestCounter",value:function(e,t){if(!e.sticky||t)if(this._resetTimeout(e),--e.requestCount,e.requestCount>1){var n="∞";e.requestCount<100&&(n=e.requestCount),e.dom.counter.innerHTML=n}else e.dom.removeChild(e.dom.counter),delete e.dom.counter;else e.isDimmed||this._dim(e)}},{key:"_checkCounter",value:function(e){e.requestCount>1?this._decrementRequestCounter(e):e.renderTo.contains(e.dom)&&(window.clearTimeout(e.timeoutID),e.sticky?this._dim(e):this._close(e))}},{key:"_clearRequestCount",value:function(e){e.requestCount=1,e.dom.removeChild(e.dom.counter),delete e.dom.counter}},{key:"_resetTimeout",value:function(e){var t=this;window.clearTimeout(e.timeoutID),e.timeoutID=window.setTimeout((function(){t._checkCounter(e)}),e.duration)}},{key:"_dim",value:function(e){var t=this,n=100;!function i(){if(n>=0&&(e.dom.style.opacity=n/100,50==--n&&e.sticky))return e.dom.style.opacity=.5,void(e.isDimmed=!0);window.setTimeout(i,t._transition/100)}()}},{key:"_unDim",value:function(e){var t=this,n=50;!function i(){if(n<100)e.dom.style.opacity=n/100,++n;else if(100===n)return e.dom.style.opacity=1,e.isDimmed=!1,void t._resetTimeout(e);window.setTimeout(i,t._transition/100)}()}},{key:"_checkNotificationOptionsValidity",value:function(e){return!(void 0===e||void 0===e.type||void 0===e.message||"string"!=typeof e.message||0===e.message.length||e.sticky&&!1===e.closable||("info"!==e.type&&"success"!==e.type&&"warning"!==e.type&&"error"!==e.type&&(e.type=this._default.notification.type),this._dismissAllLock&&(this._dismissAllLock=!1),0))}},{key:"_setOptionsFallback",value:function(e){void 0===e.title&&(e.title=this._default.notification.title),void 0===e.duration&&(e.duration=this._duration),void 0===e.iconless&&(e.iconless=this._default.notification.iconless),void 0===e.thickBorder&&(e.thickBorder=this._thickBorder),void 0===e.closable&&(e.closable=this._default.notification.closable),void 0===e.sticky&&(e.sticky=this._default.notification.sticky),void 0===e.renderTo&&(e.renderTo=this._default.notification.renderTo),void 0===e.CBtitle&&(e.CBtitle=this._default.notification.CBtitle),void 0===e.callback&&(e.callback=this._default.notification.callback),void 0===e.isDimmed&&(e.isDimmed=this._default.notification.isDimmed)}},{key:"_idGenerator",value:function(e,t){var n=0;if(!(0===e.length||t>12)){for(var i=0;i<e.length;++i)n=(n<<5)-n+e.charCodeAt(i),n|=0;return(Math.abs(n).toString(36)+""+Math.abs(n/2).toString(36).split("").reverse().join("")).substring(0,t).toUpperCase()}}},{key:"new",value:function(e){if(!1===this._checkNotificationOptionsValidity(e))return console.error("Notification.js : new() options argument object is invalid."),-1;this._setOptionsFallback(e);var t=this._buildUI({id:this._idGenerator("".concat(e.type).concat(e.message),5),type:e.type,message:e.message,title:e.title,duration:e.duration,iconless:e.iconless,thickBorder:e.thickBorder,closable:e.closable,sticky:e.sticky,renderTo:e.renderTo,CBtitle:e.CBtitle,callback:e.callback,isDimmed:e.isDimmed});return this._active[t.id]?(this._resetTimeout(this._active[t.id]),this._incrementRequestCounter(this._active[t.id]),t=this._active[t.id]):this._start(t),t.id}},{key:"info",value:function(e){if(e)return e.type="info",this.new(e);console.error("Notification.js : No arguments provided for info() method.")}},{key:"success",value:function(e){if(e)return e.type="success",this.new(e);console.error("Notification.js : No arguments provided for success() method.")}},{key:"warning",value:function(e){if(e)return e.type="warning",this.new(e);console.error("Notification.js : No arguments provided for warning() method.")}},{key:"error",value:function(e){if(e)return e.type="error",this.new(e);console.error("Notification.js : No arguments provided for error() method.")}},{key:"dismiss",value:function(e){window.clearTimeout(this._active[e].timeoutID),this._active[e].requestCount>1&&this._clearRequestCount(this._active[e]),this._close(this._active[e])}},{key:"dismissAll",value:function(){if(!this._dismissAllLock&&0!==Object.keys(this._active).length)for(var e in this._dismissAllLock=!0,this._queue={},this._active)this.dismiss(e)}},{key:"dismissType",value:function(e){if(0!==Object.keys(this._active).length)for(var t in this._active)this._active[t].type===e&&this.dismiss(t)}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,l(i.key),i)}}function l(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}window.notification=new r;var c=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._version="0.1.1",this._asideScroll=null,this._dndController=null,this._db=null},t=[{key:"_initApp",value:function(){}},{key:"_events",value:function(){document.querySelector("#aside-toggle").addEventListener("click",this._toggleAside.bind(this)),document.querySelector("#db-add").addEventListener("click",this._requestNewElement.bind(this)),document.querySelector("#db-save").addEventListener("click",this._exportDatabase.bind(this)),document.querySelector("#db-erase").addEventListener("click",this._clearDatabaseModal.bind(this)),document.querySelector("#info-button").addEventListener("click",this._infoModal.bind(this)),document.querySelector("#modal-overlay").addEventListener("click",this._closeModal.bind(this))}},{key:"_finalizeInit",value:function(){return new Promise((function(e,t){try{document.querySelector("#loading-overlay").style.opacity=0,setTimeout((function(){document.querySelector("#loading-overlay").style.display="none",e()}),500)}catch(e){t(e)}}))}},{key:"_toggleAside",value:function(){document.getElementById("bd-viewer").classList.contains("opened")?(document.getElementById("aside-toggle").innerHTML="&rsaquo;",document.getElementById("bd-viewer").classList.remove("opened")):(document.getElementById("aside-toggle").innerHTML="&lsaquo;",document.getElementById("bd-viewer").classList.add("opened"))}},{key:"_fillDatabase",value:function(){}},{key:"_requestNewElement",value:function(){}},{key:"_exportDatabase",value:function(){}},{key:"_clearDatabase",value:function(){}},{key:"_clearDatabaseModal",value:function(){var e=this;if(null!==this._db){var t=document.getElementById("modal-overlay");fetch("assets/html/cleardatabasemodal.html").then((function(n){t.style.display="flex",n.text().then((function(n){var i=document.createRange().createContextualFragment(n);t.appendChild(i),t.querySelector("#save-button").addEventListener("click",(function(){e._exportDatabase(),e._closeModal({srcElement:{id:"close-button"}})})),t.querySelector("#confirm-button").addEventListener("click",(function(){e._clearDatabase(),e._closeModal({srcElement:{id:"close-button"}})})),setTimeout((function(){return t.style.opacity=1}),50)}))})).catch((function(e){return console.error(e)}))}else this._clearDatabase()}},{key:"_infoModal",value:function(){var e=this,t=document.getElementById("modal-overlay");fetch("assets/html/infomodal.html").then((function(n){t.style.display="flex",n.text().then((function(n){var i=document.createRange().createContextualFragment(n);t.appendChild(i),t.querySelector("#app-version").innerHTML=e._version,setTimeout((function(){return t.style.opacity=1}),50)}))})).catch((function(e){return console.error(e)}))}},{key:"_closeModal",value:function(e){if("modal-overlay"===e.srcElement.id||"close-modal"===e.srcElement.className||"close-button"===e.srcElement.id){var t=document.getElementById("modal-overlay");"flex"===t.style.display&&(t.style.opacity=0,setTimeout((function(){t.innerHTML="",t.style=""}),400))}}}],t&&s(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,m(i.key),i)}}function m(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}var h=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);try{this._container=document.querySelector(t.target),this._onDropFileCB=t.onDropFile,this._borderStyle=this._container.style.border,this._events()}catch(e){console.error("Unable to build the DnD class.\n".concat(e))}},n=[{key:"formatAsJSON",value:function(e){return JSON.parse(e)}},{key:"formatCSVAsJSON",value:function(e,t){for(var n=[],i=0,o=0,r=0;r<e.length;++r){var a=e[r],s=e[r+1];n[i]=n[i]||[],n[i][o]=n[i][o]||"",a!==t?"\r"!==a||"\n"!==s?"\n"!==a&&"\r"!==a?n[i][o]+=a:(++i,o=0):(n[i][o]=parseFloat(n[i][o]),++i,o=0,++r):(n[i][o]=parseFloat(n[i][o]),++o)}return n}}],(t=[{key:"_events",value:function(){this._container.addEventListener("dragenter",this._dragEnter.bind(this),!1),this._container.addEventListener("dragover",this._dragOver.bind(this),!1),this._container.addEventListener("dragleave",this._dragLeave.bind(this),!1),this._container.addEventListener("drop",this._drop.bind(this),!1)}},{key:"_eventBehavior",value:function(e){e.stopPropagation(),e.preventDefault()}},{key:"_dragEnter",value:function(e){this._eventBehavior(e),this._container.style.border="dashed 6px rgb(255, 100, 100)"}},{key:"_dragOver",value:function(e){this._eventBehavior(e),e.dataTransfer.dropEffect="copy"}},{key:"_dragLeave",value:function(e){null===e.relatedTarget&&(this._eventBehavior(e),this._container.style.border=this._borderStyle)}},{key:"_drop",value:function(e){var t=this;this._eventBehavior(e),this._container.style.border=this._borderStyle;for(var n=e.dataTransfer.files,i=0;i<n.length;++i){var o=new FileReader;o.onload=function(e){return function(n){t._onDropFileCB(e,n)}}(n[i]),o.readAsText(n[i])}}}])&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,v(i.key),i)}}function v(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}var y=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._target=t.target,this._horizontal=t.horizontal||!1,this._minSize=t.minSize||15,this._style=t.style||{},this._wrapper={},this._container={},this._bar={},this._scrollRatio=0,this._lastPageX=0,this._lastPageY=0,this._init().then(this._events.bind(this)).then(this._updateScrollBar.bind(this))},(t=[{key:"_init",value:function(){var e=this;return new Promise((function(t){var n=document.createDocumentFragment();for(e._target.classList.add("scrollbar-container"),e._wrapper=document.createElement("DIV"),e._wrapper.setAttribute("class","scrollbar-wrapper"),e._container=document.createElement("DIV"),!0===e._horizontal?e._container.setAttribute("class","horizontal-scrollbar-content"):e._container.setAttribute("class","scrollbar-content");e._target.firstChild;)e._container.appendChild(e._target.firstChild);e._wrapper.appendChild(e._container),n.appendChild(e._wrapper),e._target.appendChild(n),!0===e._horizontal?e._target.insertAdjacentHTML("beforeend",'<div class="horizontal-scroll"></div>'):e._target.insertAdjacentHTML("beforeend",'<div class="scroll"></div>'),e._bar=e._target.lastChild,e.style=e._style,t()}))}},{key:"_events",value:function(){var e=this;return new Promise((function(t){e._drag=e._drag.bind(e),e._stopDrag=e._stopDrag.bind(e),window.addEventListener("resize",e._updateScrollBar.bind(e)),e._container.addEventListener("scroll",e._updateScrollBar.bind(e)),e._container.addEventListener("mouseenter",e._updateScrollBar.bind(e)),e._bar.addEventListener("mousedown",e._barClicked.bind(e)),t()}))}},{key:"_barClicked",value:function(e){var t=this;!0===this._horizontal?this._lastPageX=e.pageX:this._lastPageY=e.pageY,this._bar.classList.add("scrollbar-grabbed"),document.body.classList.add("scrollbar-grabbed"),requestAnimationFrame((function(){document.addEventListener("mousemove",t._drag),document.addEventListener("mouseup",t._stopDrag)}))}},{key:"_drag",value:function(e){var t=this;if(!0===this._horizontal){var n=e.pageX-this._lastPageX;this._lastPageX=e.pageX,requestAnimationFrame((function(){t._container.scrollLeft+=n/t._scrollRatio}))}else{var i=e.pageY-this._lastPageY;this._lastPageY=e.pageY,requestAnimationFrame((function(){t._container.scrollTop+=i/t._scrollRatio}))}}},{key:"_stopDrag",value:function(){this._bar.classList.remove("scrollbar-grabbed"),document.body.classList.remove("scrollbar-grabbed"),document.removeEventListener("mousemove",this._drag),document.removeEventListener("mouseup",this._stopDrag)}},{key:"_updateScrollBar",value:function(){!0===this._horizontal?this._updateHorizontalScroll():this._updateVerticalScroll()}},{key:"_updateHorizontalScroll",value:function(){var e=this,t=this._container.scrollWidth,n=this._container.clientWidth,i=-1*(this._target.clientHeight-this._bar.clientHeight);this._scrollRatio=n/t,requestAnimationFrame((function(){if(e._scrollRatio>=1)e._bar.classList.add("hidden");else{var o=Math.max(100*e._scrollRatio,e._minSize)*n/100,r=e._container.scrollLeft/t*100*n/100;if(Math.max(100*e._scrollRatio,e._minSize)===e._minSize){o=e._minSize<n?e._minSize:n/2;var a=100*e._container.scrollLeft/(t-n);r=(n-o)*((e._container.scrollLeft+a*n/100)/t*100)/100}e._bar.classList.remove("hidden"),e._bar.style.cssText="width: ".concat(o,"px; left: ").concat(r,"px; bottom: ").concat(i,"px;")}}))}},{key:"_updateVerticalScroll",value:function(){var e=this,t=this._container.scrollHeight,n=this._container.clientHeight,i=-1*(this._target.clientWidth-this._bar.clientWidth);this._scrollRatio=n/t,requestAnimationFrame((function(){if(e._scrollRatio>=1)e._bar.classList.add("hidden");else{var o=Math.max(100*e._scrollRatio,e._minSize)*n/100,r=e._container.scrollTop/t*100*n/100;if(Math.max(100*e._scrollRatio,e._minSize)===e._minSize){o=e._minSize<n?e._minSize:n/2;var a=100*e._container.scrollTop/(t-n);r=(n-o)*((e._container.scrollTop+a*n/100)/t*100)/100}e._bar.classList.remove("hidden"),e._bar.style.cssText="height: ".concat(o,"px; top: ").concat(r,"px; right: ").concat(i,"px;")}}))}},{key:"updateScrollbar",value:function(){this._updateScrollBar()}},{key:"style",set:function(e){this._style=e,this._style.color&&this._target.style.setProperty("--scroll-color",this._style.color),this._style.size&&this._target.style.setProperty("--scroll-size",this._style.size),this._style.radius&&this._target.style.setProperty("--scroll-radius",this._style.radius),this._style.lowOpacity&&this._target.style.setProperty("--scroll-low-opacity",this._style.lowOpacity),this._style.highOpacity&&this._target.style.setProperty("--scroll-high-opacity",this._style.highOpacity),this._style.transitionDuration&&this._target.style.setProperty("--scroll-transition-duration",this._style.transitionDuration)}}])&&f(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,g(i.key),i)}}function g(e){var t=function(e){if("object"!=_(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_(t)?t:t+""}function S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S=function(){return!!e})()}function k(){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},k.apply(null,arguments)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}var q=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t,n){return t=w(t),function(e,t){if(t&&("object"==_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,S()?Reflect.construct(t,n||[],w(e).constructor):t.apply(e,n))}(this,t))._input=[[0,0,0],[0,0,0],[0,0,0]],e._tensThreshold=0,e._resultsAmount=1,e._precision=75,e._perf={db:{m1:null,m2:null},analysis:{m1:null,m2:null}},e._initApp().then(e._events.bind(e)).then(e._finalizeInit.bind(e)).catch((function(t){window.notification.error({message:"Erreur fatale à l'initialisation de l'application. Contactez le support"}),document.getElementById("feedback-label").innerHTML="Une ereur fatale est survenue à l'initialisation de l'application, aucune fonctionnalité n'est accessible. Contactez le support.",console.error("LPSA v".concat(e._version," : Erreur fatale à l'initialisation de l'application. Contactez le support en précisant l'erreur suivante :\n"),t)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(t,e),n=t,i=[{key:"_initApp",value:function(){var e=this;return new Promise((function(t,n){try{e._dndController=new h({target:".dnd-container",onDropFile:function(t,n){"application/json"===t.type?e._fillDatabase(h.formatAsJSON(n.target.result)):(window.notification.error({message:"Format de fichier non pris en charge pour l'import de la base de donnée"}),document.getElementById("feedback-label").innerHTML="Le fichier déposé n'est pas au format supporté (.JSON).")}});var i=window.localStorage.getItem("lpsa-session-db");null!==i&&e._fillDatabase(JSON.parse(i)),t()}catch(e){n(e)}}))}},{key:"_events",value:function(){var e=this;return new Promise((function(n,i){try{document.querySelector("#t1-1").addEventListener("input",e._updateInputNumber.bind(e,"0/0")),document.querySelector("#t1-2").addEventListener("input",e._updateInputNumber.bind(e,"0/1")),document.querySelector("#t1-3").addEventListener("input",e._updateInputNumber.bind(e,"0/2")),document.querySelector("#t2-1").addEventListener("input",e._updateInputNumber.bind(e,"1/0")),document.querySelector("#t2-2").addEventListener("input",e._updateInputNumber.bind(e,"1/1")),document.querySelector("#t2-3").addEventListener("input",e._updateInputNumber.bind(e,"1/2")),document.querySelector("#t3-1").addEventListener("input",e._updateInputNumber.bind(e,"2/0")),document.querySelector("#t3-2").addEventListener("input",e._updateInputNumber.bind(e,"2/1")),document.querySelector("#t3-3").addEventListener("input",e._updateInputNumber.bind(e,"2/2")),document.querySelector("#threshold-range").addEventListener("input",e._updateThresholdRange.bind(e)),document.querySelector("#results-range").addEventListener("input",e._updateResultsRange.bind(e)),document.querySelector("#precision-range").addEventListener("input",e._updatePrecisionRange.bind(e)),document.querySelector("#clear-input").addEventListener("click",e._clearInputs.bind(e)),document.querySelector("#submit-input").addEventListener("click",e._submitInputs.bind(e)),(o=t,r=e,"function"==typeof(a=k(w(1&3?o.prototype:o),"_events",r))?function(e){return a.apply(r,e)}:a)([]),n()}catch(e){i(e)}var o,r,a}))}},{key:"_updateInputNumber",value:function(e,t){var n=e.split("/");if(2===n.length&&!(n[0]>2||n[4]>2)){if(!/[0-9]|\./.test(t.target.value))return t.target.classList.add("error"),setTimeout((function(){return t.target.classList.remove("error")}),1500),t.target.value=null,void(this._input[n[0]][n[1]]=0);t.target.classList.add("success"),setTimeout((function(){return t.target.classList.remove("success")}),1500),this._input[n[0]][n[1]]=parseInt(t.target.value)}}},{key:"_updateThresholdRange",value:function(e){var t=e.target.value;this._tensThreshold=parseInt(t),document.querySelector("#threshold-range-label").innerHTML="Tolérance ".concat(t)}},{key:"_updateResultsRange",value:function(e){var t=e.target.value;this._resultsAmount=parseInt(t),document.querySelector("#results-range-label").innerHTML="Nombre de resultats ".concat(t)}},{key:"_updatePrecisionRange",value:function(e){var t=e.target.value;this._precision=parseInt(t),document.querySelector("#precision-range-label").innerHTML="Précision minimale : ".concat(t,"%")}},{key:"_clearInputs",value:function(e){document.querySelector("#t1-1").value=null,document.querySelector("#t1-2").value=null,document.querySelector("#t1-3").value=null,document.querySelector("#t2-1").value=null,document.querySelector("#t2-2").value=null,document.querySelector("#t2-3").value=null,document.querySelector("#t3-1").value=null,document.querySelector("#t3-2").value=null,document.querySelector("#t3-3").value=null,this._input=[[0,0,0],[0,0,0],[0,0,0]],e.target.blur(),window.notification.info({message:"Les champs en entrée ont été nettoyés"})}},{key:"_submitInputs",value:function(e){if(null===this._db)return window.notification.warning({message:"Aucune base de donnée n'est chargée en mémoire"}),document.getElementById("feedback-label").innerHTML="Veuillez d'abord glisser-déposer n'importe ou sur la page le JSON de données.",void e.target.blur();for(var t=0,n=0;n<this._input.length;++n)for(var i=0;i<this._input[n].length;++i)this._input[n][i]>0&&++t;if(t<4)return window.notification.warning({message:"L'indice de valeur de cette serie est inférieur a 4/9"}),document.getElementById("feedback-label").innerHTML="Cette serie comporte moins de 4/9 valeurs et n'est pas pertinente à analyser.",void e.target.blur();this._performInputAnalysis(t)}},{key:"_fillDatabase",value:function(e){var t=this;if(!e.date||!e.data)return window.notification.error({message:"Le contenu de la base de donnée est mal formaté"}),void(document.getElementById("feedback-label").innerHTML="Le fichier déposé ne contiens pas les données attentudes.");this._perf.db.m1=performance.now(),window.localStorage.removeItem("lpsa-session-db"),document.getElementById("db-info").innerHTML="",document.getElementById("aside-content").innerHTML="";var n=new Intl.DateTimeFormat("fr",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e.date));document.getElementById("feedback-label").innerHTML="Import de la base de donnée du ".concat(n,"..."),document.getElementById("db-info").appendChild(this.__buildDatabaseInformation(e,n));for(var i=0;i<e.data.length;++i){var o=this.__buildDatabaseSeries(e.data[i],"goFor",i);document.getElementById("aside-content").appendChild(o);var r=this.__buildDatabaseSeries(e.data[i],"goAgainst",i);document.getElementById("aside-content").appendChild(r)}this._db=e,window.localStorage.setItem("lpsa-session-db",JSON.stringify(this._db)),this._asideScroll=new y({target:document.getElementById("aside-content"),minSize:200,style:{color:"#758C78"}}),requestAnimationFrame(this._asideScroll.updateScrollbar.bind(this._asideScroll)),this._perf.db.m2=performance.now(),window.notification.success({message:"Base de donnée du ".concat(n," chargée"),CBtitle:"Voir les données",callback:function(){return t._toggleAside()}}),document.getElementById("feedback-label").innerHTML="Base de donnée du ".concat(n," chargée en ").concat(((this._perf.db.m2-this._perf.db.m1)/1e3).toFixed(3)," seconde(s).")}},{key:"__buildDatabaseInformation",value:function(e,t){for(var n=0,i=0;i<e.data.length;++i)n+=e.data[i].goFor.length,n+=e.data[i].goAgainst.length;var o=document.createElement("P");return o.innerHTML="\n      ".concat(t," (version ").concat(e.version,")<br>\n      ").concat(n," entrée(s) en base\n    "),o}},{key:"__buildDatabaseSeries",value:function(e,t,n){var i=this,o=document.createElement("DIV");o.classList.add("series"),o.innerHTML="\n      <h2>Série ".concat(e.seriesLength,'/9, parier <span class="go-').concat(t.substring(2).toLowerCase(),'">').concat("goFor"===t?"Pour":"Contre","</span><br><i>").concat(e[t].length," entrée(s)</i></h2>\n    ");var r=document.createElement("DIV");r.innerHTML="➖",o.firstElementChild.appendChild(r);var a=document.createElement("DIV");if(e[t].length)for(var s=function(o){var r=i._buildDatabaseElement(e[t][o]),s=document.createElement("BUTTON");s.addEventListener("click",(function(){i._editElementModal(n,o,t)})),s.innerHTML="✏️",r.appendChild(s);var l=document.createElement("BUTTON");l.addEventListener("click",(function(){i._removeDatabaseElement(n,o,t)})),l.innerHTML="🗑️",r.appendChild(l),a.appendChild(r)},l=0;l<e[t].length;++l)s(l);else{var c=document.createElement("P");c.innerHTML="Aucune entrée pour cette catégorie",a.appendChild(c)}return r.addEventListener("click",(function(){"➖"===r.innerHTML?(r.innerHTML="➕",a.style.display="none"):(r.innerHTML="➖",a.style.display="inherit"),requestAnimationFrame(i._asideScroll.updateScrollbar.bind(i._asideScroll))})),o.appendChild(a),o}},{key:"_buildDatabaseElement",value:function(e){var t=document.createElement("P"),n=e.values;if(t.innerHTML='\n      <span class="value">'.concat(n[0][0],", ").concat(n[0][1],", ").concat(n[0][2]," / ").concat(n[1][0],", ").concat(n[1][1],", ").concat(n[1][2]," / ").concat(n[2][0],", ").concat(n[2][1],", ").concat(n[2][2],"</span>\n    "),e.additionnal.length>0){var i=e.additionnal;t.innerHTML+='\n        <span class="additionnal">'.concat(i[0][0],"-").concat(i[0][1],"-").concat(i[0][2]," / ").concat(i[1][0],"-").concat(i[1][1],"-").concat(i[1][2]," / ").concat(i[2][0],"-").concat(i[2][1],"-").concat(i[2][2],"</span>\n      ")}else t.innerHTML+='\n        <span class="additionnal">-</span>\n      ';return""!==e.comment?t.innerHTML+='\n        <span class="comment">'.concat(e.comment,"</span>\n      "):t.innerHTML+='\n        <span class="comment">-</span>\n      ',t}},{key:"_addDatabaseElement",value:function(e,t,n){this._db.data[e][t].push(n)}},{key:"_requestNewElement",value:function(){null===this._db&&(this._db={version:"1",date:"".concat((new Date).toISOString().split("T")[0]),data:JSON.parse('[{"seriesLength":4,"goFor":[],"goAgainst":[]},{"seriesLength":5,"goFor":[],"goAgainst":[]},{"seriesLength":6,"goFor":[],"goAgainst":[]},{"seriesLength":7,"goFor":[],"goAgainst":[]},{"seriesLength":8,"goFor":[],"goAgainst":[]},{"seriesLength":9,"goFor":[],"goAgainst":[]}]')}),this._addElementModal()}},{key:"_editDatabaseElement",value:function(e,t,n,i){this._db.data[e][n][t]=i,this._fillDatabase(this._db)}},{key:"_removeDatabaseElement",value:function(e,t,n){this._db.data[e][n].splice(t,1),this._fillDatabase(this._db)}},{key:"_exportDatabase",value:function(){if(null!==this._db){var e=document.createElement("A"),t=this._db;t.version="".concat(parseInt(this._db.version)+1),t.date=(new Date).toISOString().split("T")[0];var n=new Blob([JSON.stringify(t)],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="lpsa-dataset-".concat(t.date,".json"),e.click()}else document.getElementById("feedback-label").innerHTML="Aucune base de donnée à exporter.",window.notification.warning({message:"Aucune base de donnée à exporter"})}},{key:"_clearDatabase",value:function(){if(this._db){var e=this._db.date;document.getElementById("feedback-label").innerHTML="Suppression de la base de donnée du ".concat(e,"..."),document.getElementById("db-info").innerHTML="<p>Aucune information disponible, veuillez charger une base de donnée.</p>",document.getElementById("aside-content").innerHTML="<i>Aucune donnée chargée en session. Veuillez glisser/déposer un fichier (.JSON) de base de donnée n'importe où sur cette page.</i>",window.localStorage.removeItem("lpsa-session-db"),this._db=null,document.getElementById("feedback-label").innerHTML="Base de donnée supprimée.",window.notification.success({message:"Base de donnée du ".concat(e," supprimée")})}else document.getElementById("feedback-label").innerHTML="Aucune base de donnée à supprimer.",window.notification.warning({message:"Aucune base de donnée à supprimer"})}},{key:"_performInputAnalysis",value:function(e){document.getElementById("feedback-label").innerHTML="Démarrage de l'analyse, serie évaluée ".concat(e,"/9..."),this._perf.analysis.m1=performance.now();for(var t=null,n=0;n<this._db.data.length;++n)if(this._db.data[n].seriesLength===e){t=this._db.data[n];break}if(null===t)return window.notification.error({message:"Aucune donnée ".concat(e,"/9 à comparer")}),void(document.getElementById("feedback-label").innerHTML="Aucune donnée en base pour des séries evalués ".concat(e,"/9."));var i=this.__computeCandidates(t.goFor),o=this.__computeCandidates(t.goAgainst);i=i.sort((function(e,t){return e.distance-t.distance})),o=o.sort((function(e,t){return e.distance-t.distance})),this._resultsModal(i,o),this._perf.analysis.m2=performance.now(),window.notification.success({message:"Analyse des données terminée"}),document.getElementById("feedback-label").innerHTML="Analyse de la serie terminée :  ".concat(i.length+o.length," résultat(s).")}},{key:"__computeCandidates",value:function(e){for(var t=[],n=0;n<e.length;++n){for(var i=0,o=!0,r=0;r<3;++r)for(var a=0;a<3;++a){var s=parseInt("".concat(e[n].values[r][a]/10)[0]),l=parseInt("".concat(this._input[r][a]/10)[0]);0!==this._input[r][a]&&0===e[n].values[r][a]?o=!1:s===l||Math.abs(e[n].values[r][a]-this._input[r][a])<=this._tensThreshold?i+=Math.abs(e[n].values[r][a]-this._input[r][a]):o=!1}!0===o&&i<100&&100-i>=this._precision&&t.push({distance:i,series:e[n]})}return t}},{key:"_addElementModal",value:function(){var e=this,t=document.getElementById("modal-overlay");fetch("assets/html/newelementmodal.html").then((function(n){t.style.display="flex",n.text().then((function(n){var i=document.createRange().createContextualFragment(n);t.appendChild(i),t.querySelector("#submit-save").addEventListener("click",(function(){for(var n=[[parseInt(t.querySelector("#v1-1").value)||0,parseInt(t.querySelector("#v1-2").value)||0,parseInt(t.querySelector("#v1-3").value)||0],[parseInt(t.querySelector("#v2-1").value)||0,parseInt(t.querySelector("#v2-2").value)||0,parseInt(t.querySelector("#v2-3").value)||0],[parseInt(t.querySelector("#v3-1").value)||0,parseInt(t.querySelector("#v3-2").value)||0,parseInt(t.querySelector("#v3-3").value)||0]],i=0,o=0;o<n.length;++o)for(var r=0;r<n[o].length;++r)n[o][r]>0&&++i;if(i<4)window.notification.warning({message:"L'indice de valeur de cette serie est inférieur a 4/9"});else{for(var a={values:n,additionnal:[],comment:t.querySelector("#comment").value},s=!1,l=0;l<3;++l){for(var c=0;c<3;++c)if(!isNaN(parseInt(t.querySelector("#a".concat(l,"-").concat(c)).value))){s=!0;break}if(s)break}!0===s&&(a.additionnal=[[parseInt(t.querySelector("#a1-1").value)||0,parseInt(t.querySelector("#a1-2").value)||0,parseInt(t.querySelector("#a1-3").value)||0],[parseInt(t.querySelector("#a2-1").value)||0,parseInt(t.querySelector("#a2-2").value)||0,parseInt(t.querySelector("#a2-3").value)||0],[parseInt(t.querySelector("#a3-1").value)||0,parseInt(t.querySelector("#a3-2").value)||0,parseInt(t.querySelector("#a3-3").value)||0]]);for(var u=0;u<e._db.data.length;++u)e._db.data[u].seriesLength===i&&(t.querySelector("#switch").checked?e._addDatabaseElement(u,"goAgainst",a):e._addDatabaseElement(u,"goFor",a));e._fillDatabase(e._db),e._closeModal({srcElement:{id:"close-button"}})}})),setTimeout((function(){return t.style.opacity=1}),50)}))})).catch((function(e){return console.error(e)}))}},{key:"_editElementModal",value:function(e,t,n){var i=this,o=document.getElementById("modal-overlay");fetch("assets/html/newelementmodal.html").then((function(r){o.style.display="flex",r.text().then((function(r){var a=document.createRange().createContextualFragment(r);o.appendChild(a);var s=i._db.data[e][n][t];o.querySelector("#switch").checked="goFor"!==n,o.querySelector("#v1-1").value=s.values[0][0]||"",o.querySelector("#v1-2").value=s.values[0][1]||"",o.querySelector("#v1-3").value=s.values[0][2]||"",o.querySelector("#v2-1").value=s.values[1][0]||"",o.querySelector("#v2-2").value=s.values[1][1]||"",o.querySelector("#v2-3").value=s.values[1][2]||"",o.querySelector("#v3-1").value=s.values[2][0]||"",o.querySelector("#v3-2").value=s.values[2][1]||"",o.querySelector("#v3-3").value=s.values[2][2]||"",3===s.additionnal.length&&(o.querySelector("#a1-1").value=s.additionnal[0][0],o.querySelector("#a1-2").value=s.additionnal[0][1],o.querySelector("#a1-3").value=s.additionnal[0][2],o.querySelector("#a2-1").value=s.additionnal[1][0],o.querySelector("#a2-2").value=s.additionnal[1][1],o.querySelector("#a2-3").value=s.additionnal[1][2],o.querySelector("#a3-1").value=s.additionnal[2][0],o.querySelector("#a3-2").value=s.additionnal[2][1],o.querySelector("#a3-3").value=s.additionnal[2][2]),""!==s.comment&&(o.querySelector("#comment").value=s.comment),o.querySelector("#submit-save").addEventListener("click",(function(){for(var r=[[parseInt(o.querySelector("#v1-1").value)||0,parseInt(o.querySelector("#v1-2").value)||0,parseInt(o.querySelector("#v1-3").value)||0],[parseInt(o.querySelector("#v2-1").value)||0,parseInt(o.querySelector("#v2-2").value)||0,parseInt(o.querySelector("#v2-3").value)||0],[parseInt(o.querySelector("#v3-1").value)||0,parseInt(o.querySelector("#v3-2").value)||0,parseInt(o.querySelector("#v3-3").value)||0]],a=0,s=0;s<r.length;++s)for(var l=0;l<r[s].length;++l)r[s][l]>0&&++a;if(a<4)window.notification.warning({message:"L'indice de valeur de cette serie est inférieur a 4/9"});else{var c={values:r,additionnal:[],comment:o.querySelector("#comment").value};if(isNaN(parseInt(o.querySelector("#a1-1").value))||(c.additionnal=[[parseInt(o.querySelector("#a1-1").value)||0,parseInt(o.querySelector("#a1-2").value)||0,parseInt(o.querySelector("#a1-3").value)||0],[parseInt(o.querySelector("#a2-1").value)||0,parseInt(o.querySelector("#a2-2").value)||0,parseInt(o.querySelector("#a2-3").value)||0],[parseInt(o.querySelector("#a3-1").value)||0,parseInt(o.querySelector("#a3-2").value)||0,parseInt(o.querySelector("#a3-3").value)||0]]),"goFor"===n&&!0===o.querySelector("#switch").checked||"goAgainst"===n&&!1===o.querySelector("#switch").checked||e!==a){i._removeDatabaseElement(e,t,n);for(var u=0;u<i._db.data.length;++u)i._db.data[u].seriesLength===a&&(o.querySelector("#switch").checked?i._db.data[u].goAgainst.push(c):i._db.data[u].goFor.push(c));i._fillDatabase(i._db)}else i._editDatabaseElement(e,t,n,c);i._closeModal({srcElement:{id:"close-button"}})}})),setTimeout((function(){return o.style.opacity=1}),50)}))})).catch((function(e){return console.error(e)}))}},{key:"_resultsModal",value:function(e,t){var n=this,i=document.getElementById("modal-overlay");fetch("assets/html/resultsmodal.html").then((function(o){i.style.display="flex",o.text().then((function(o){var r=document.createRange().createContextualFragment(o),a=n._input;r.querySelector("#studied-series").innerHTML="\n          ".concat(a[0][0],", ").concat(a[0][1],", ").concat(a[0][2]," / ").concat(a[1][0],", ").concat(a[1][1],", ").concat(a[1][2]," / ").concat(a[2][0],", ").concat(a[2][1],", ").concat(a[2][2],"\n        "),r.querySelector("#study-stats").innerHTML="\n          Un total de ".concat(e.length+t.length," résultat(s) ont été trouvés dans la base de donnée.<br>\n          Ces résultats ont été trouvés en ").concat(((n._perf.db.m2-n._perf.db.m1)/1e3).toFixed(3)," seconde(s).<br><br>\n          Le nombre de résultats à afficher par catégorie est de <b>").concat(n._resultsAmount,"</b>.<br>\n          La tolérance pour les calculs entre dizaines est de <b>").concat(n._tensThreshold,"</b>.<br>\n          La précision minimale pour ces résultats est de <b>").concat(n._precision,"%</b>.\n        ");for(var s=0;s<n._resultsAmount;++s){if(e[s]){var l=n._buildDatabaseElement(e[s].series),c=document.createElement("DIV");c.classList.add("category-item"),c.innerHTML="\n              <h4>".concat(100-e[s].distance,"%</h4>\n            "),c.appendChild(l),r.querySelector("#go-for").appendChild(c)}else if(""===r.querySelector("#go-for").innerHTML){var u=document.createElement("P");u.innerHTML="<b>Aucun résultats pour cette catégorie</b>",r.querySelector("#go-for").appendChild(u)}if(t[s]){var d=n._buildDatabaseElement(t[s].series),m=document.createElement("DIV");m.classList.add("category-item"),m.innerHTML="\n              <h4>".concat(100-t[s].distance,"%</h4>\n            "),m.appendChild(d),r.querySelector("#go-against").appendChild(m)}else if(""===r.querySelector("#go-against").innerHTML){var h=document.createElement("P");h.innerHTML="<b>Aucun résultats pour cette catégorie</b>",r.querySelector("#go-against").appendChild(h)}}var p=new y({target:r.querySelector(".results-wrapper"),minSize:200,style:{color:"#758C78"}});requestAnimationFrame((function(){p.updateScrollbar()})),i.appendChild(r),setTimeout((function(){return i.style.opacity=1}),50)}))})).catch((function(e){return console.error(e)}))}}],i&&b(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i}(c);window.LPSA=t.default}();